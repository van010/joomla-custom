jQuery(document).ready(function(_){acym_helperSegment.reloadGlobalCounter(_(".acym__segments__select__classic__filter").closest(".acym__segments__group__filter")),acym_helperSegment.refreshFilterProcess(),acym_helperSegment.rebuildFilters(),_('[name="segment_selected"]').on("change",function(e){""!==_(this).val()&&_('[name^="acym_action"]').length>0&&(acym_helper.confirm(ACYM_JS_TXT.ACYM_IF_YOU_SELECT_SEGMENT_FILTERS_ERASE)?_(".acym__segments__one__filter__classic").each((e,a)=>{0===e?(_(a).find(".acym__segments__inserted__filter").remove(),_(a).find('[name="filters_name"]').val(0)):_(a).remove()}):_(this).val(""));let a=jQuery("#acym__campaigns__segment__edit-user-count");a.html('<i class="acymicon-circle-o-notch acymicon-spin"></i>');let i=ACYM_AJAX_URL+"&ctrl=segments&task=countGlobalBySegmentId&id="+_(this).val()+"&lists="+_('[name="list_selected"]').val();_.get(i,function(_){_=acym_helper.parseJson(_),a.html(_.count)})}),_(".acym__campaigns__segment__edit__filters__save-icon").off("click").on("click",function(){_(this).hide(),_(".acym__campaigns__segment__edit__filters__save-action").css("display","flex")}),_(".acym__campaigns__segment__edit__filters__save-action .acym__button__cancel").off("click").on("click",function(){_(".acym__campaigns__segment__edit__filters__save-icon").css("display","flex"),_(".acym__campaigns__segment__edit__filters__save-action").hide()}),_(".acym__campaigns__segment__edit__filters__save-action-save").off("click").on("click",function(){let e=_("#acym__campaigns__segment__edit__filters__save-segment-name"),a=_("#acym__campaigns__segment__edit__filters__save-well");if(""===e.val()||0===_('[name^="acym_action"]').length)return alert(ACYM_JS_TXT.ACYM_PLEASE_FILL_A_NAME_FOR_YOUR_SEGMENT),!1;_(".acym__campaigns__segment__edit__filters__save-loading").css("display","flex"),_(".acym__campaigns__segment__edit__filters__save-icon").hide(),_(".acym__campaigns__segment__edit__filters__save-action").hide();let i=ACYM_AJAX_URL+"&ctrl=segments&task=saveFromCampaign";_.post(i,jQuery("#acym_form").serialize()+"&ctrl=segments&task=saveFromCampaign").done(function(e){if(void 0!==(e=acym_helper.parseJson(e)).error)return acym_helperNotification.addNotification(e.error,"error",!0),!1;acym_helperNotification.addNotification(e.message,"info",!0),a.css("display","flex").html(e.message),_('[name="saved_segment_id"]').val(e.segment_id)}).error(function(){acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_COULD_NOT_SAVE_SEGMENT,"error",!0)}).always(function(){_(".acym__campaigns__segment__edit__filters__save-loading").hide(),_(".acym__campaigns__segment__edit__filters__save-icon").css("display","flex"),e.val(""),setTimeout(()=>{a.hide().html("")},3e3)})}),acym_helperFilter.setAutomationReload()});