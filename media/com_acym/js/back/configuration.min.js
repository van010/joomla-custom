jQuery(document).ready(function(e){function i(i,a){let t=e(`#${i}`).val();t=acym_helper.parseJson(t);let n=e(".acym__sending__methods__choose .acym__selection__card-selected");if(0===n.length)return;let o=e(`[name="config[${a}]"]`),l=o.closest(".acym__configuration__mail__option").find(".acym__configuration__mail__info__disabled"),c=o.closest(".acym__configuration__mail__option").find("> .switch-label"),_=o.closest(".acym__configuration__mail__option").find(".switch-paddle");void 0===t[n.attr("id")]||t[n.attr("id")]?(o.next().removeAttr("disabled"),_.removeClass("disabled").removeAttr("data-acym-tooltip"),l.closest(".acym__tooltip__info").hide()):(1===parseInt(o.val())&&c.click(),_.addClass("disabled").attr("data-acym-tooltip",l.find(".acym__tooltip__text ").html()),o.next().attr("disabled","true"),l.closest(".acym__tooltip__info").show()),acym_helperTooltip.setTooltip()}function a(){i("acym__config__mail__embed__image__blocked","embed_images"),i("acym__config__mail__embed__attachment__blocked","embed_files")}!function(){let i=e('input[name="config[sending_platform]"]');i.on("change",function(){let i=e('input[name="config[sending_platform]"]:checked').val();"server"===i?(e('i[data-radio="config_mailer_methodelasticemail"], label[for="config_mailer_methodelasticemail"]').addClass("is-hidden"),e('i[data-radio="config_mailer_methodsmtp"], label[for="config_mailer_methodsmtp"]').addClass("is-hidden"),e('i[data-radio="config_mailer_methodsendgrid"], label[for="config_mailer_methodsendgrid"]').addClass("is-hidden"),e('i[data-radio="config_mailer_methodsendinblue"], label[for="config_mailer_methodsendinblue"]').addClass("is-hidden"),e('i[data-radio="config_mailer_methodqmail"], label[for="config_mailer_methodqmail"]').removeClass("is-hidden").show(),e('i[data-radio="config_mailer_methodsendmail"], label[for="config_mailer_methodsendmail"]').removeClass("is-hidden").show(),e('i[data-radio="config_mailer_methodphpmail"], label[for="config_mailer_methodphpmail"]').removeClass("is-hidden").show().click()):(e('i[data-radio="config_mailer_methodqmail"], label[for="config_mailer_methodqmail"]').addClass("is-hidden"),e('i[data-radio="config_mailer_methodsendmail"], label[for="config_mailer_methodsendmail"]').addClass("is-hidden"),e('i[data-radio="config_mailer_methodphpmail"], label[for="config_mailer_methodphpmail"]').addClass("is-hidden"),e('i[data-radio="config_mailer_methodsendinblue"], label[for="config_mailer_methodsendinblue"]').removeClass("is-hidden").show(),e('i[data-radio="config_mailer_methodsendgrid"], label[for="config_mailer_methodsendgrid"]').removeClass("is-hidden").show(),e('i[data-radio="config_mailer_methodelasticemail"], label[for="config_mailer_methodelasticemail"]').removeClass("is-hidden").show(),e('i[data-radio="config_mailer_methodsmtp"], label[for="config_mailer_methodsmtp"]').removeClass("is-hidden").show().click())});let a=e('input[name="config[mailer_method]"]:checked').val();"phpmail"===a||"sendmail"===a||"qmail"===a?e("#config_sending_platformserver").click():e("#config_sending_platformexternal").click(),i.trigger("change"),e("#config_mailer_method"+a).click()}(),function(){let i=e('input[name="config[mailer_method]"]');i.on("change",function(){e(".send_settings").hide();let i=e('input[name="config[mailer_method]"]:checked').val();const a=e(`#${i}_settings`);a.length>0&&a.show()}),i.trigger("change")}(),e("#available_ports_check").off("click").on("click",function(i){i.preventDefault();let a=e(this).parent();a.html('<i class="acymicon-circle-o-notch acymicon-spin"></i>'),e.get(ACYM_AJAX_URL+"&ctrl=configuration&task=ports",function(e){a.html(e)})}),e(".acym_autoselect").off("click").on("click",function(){this.select()}),e("#timeoutcheck_action").off("click").on("click",function(i){i.preventDefault();try{e("#timeoutcheck").html('<i class="acymicon-circle-o-notch acymicon-spin"></i>'),e.get(ACYM_AJAX_URL+"&ctrl=configuration&task=detecttimeout",function(i){e("#timeoutcheck").html("Done!")})}catch(e){alert(acym_helper.sprintf(ACYM_JS_TXT.ACYM_MAX_EXEC_TIME_GET_ERROR,e))}}),e("#checkdb_button").off("click").on("click",function(i){i.preventDefault(),e("#checkdb_report").html('<i class="acymicon-circle-o-notch acymicon-spin"></i>'),e.get(ACYM_AJAX_URL+"&ctrl=configuration&task=checkDB",function(i){e("#checkdb_report").html(i)})}),e('input[name="config[auto_bounce]"]').off("change").on("change",function(){e("#acym__configuration__bounce__auto_bounce__configuration").toggle()}),e("#sendorderid").on("change",function(){"rand"===this.value&&alert(ACYM_JS_TXT.ACYM_NO_RAND_FOR_MULTQUEUE)}),function(){let i=e("#acym__configuration__cron__report--send-to"),a=i.attr("placeholder");i.select2({width:"100%",placeholder:a,tags:!0,theme:"foundation",tokenSeparators:[","," "],createTag:function(i){let a=e.trim(i.term);return acym_helper.emailValid(a)?{id:a,text:a,newTag:!0}:null}})}(),e("#acym__configuration__button__license").off("click").on("click",function(){let i=e("#acym__configuration__license-key").val(),a=parseInt(e(this).attr("data-acym-linked"));if(""===i)return alert(ACYM_JS_TXT.ACYM_PLEASE_SET_A_LICENSE_KEY),!1;let t=a?"unlinkLicense":"attachLicense";e('[name="task"]').val(t),e.acymConfigSave(),e("#acym_form").submit()}),e("#acym__configuration__button__cron").off("click").on("click",function(){let i=parseInt(e(this).attr("data-acym-active")),a=i?"deactivateCron":"activateCron";e('[name="task"]').val(a),e("#acym_form").submit()}),function(){let i="";e("#configmultilingual_default").on("change",function(){let a=e(this).val(),t=e("#configmultilingual_languages");t.find('option[value="'+a+'"]').prop("disabled",!0).prop("selected",!1),t.find('option[value="'+i+'"]').prop("disabled",!1),t.select2({theme:"foundation",width:"100%"}),i=a}).trigger("change"),e.acymConfigSave=function(){e('[name="config[sender_info_translation]"]').length>0&&acym_helperSelectionMultilingual.changeLanguage_configuration(acym_helperSelectionMultilingual.mainLanguage),e('input[id^="delayvar"]').trigger("change"),e('input[id^="config_acl_"][id$="custom"]').each(function(){let e=jQuery('input[name="'+jQuery(this).attr("name")+'"]:checked').val();"custom"!==e&&jQuery(this).closest(".cell").find('div[id^="acl_"][id$="_container"]').remove()});let i=e("#configmultilingual_languages").val(),a=e('[name="previous_multilingual_languages"]').val();if(acym_helper.empty(a))return!0;a=a.split(",");let t=acym_helper.empty(i)?a:a.filter(e=>!i.includes(e));return!!acym_helper.empty(t)||(e.each(t,function(i){t[i]=e('#configmultilingual_default option[value="'+t[i]+'"]').text()}),acym_helper.confirm(acym_helper.sprintf(ACYM_JS_TXT.ACYM_REMOVE_LANG_CONFIRMATION,t.join(", "))))}}(),function(){let i=e("#acym__configuration__acl__zone");e("#acym__configuration__acl__toggle").off("click").on("click",function(){i.slideToggle()}).click(),e('input[name^="config[acl_"]').on("change",function(){let i=e(this).attr("name"),a=e("#"+i.substring(7,i.length-1)+"_container");a.length&&("all"===e('input[name="'+i+'"]:checked').val()?a.addClass("is-hidden"):a.removeClass("is-hidden"))})}(),acym_helperMailer.setTestCredentialsSendingMethods(),acym_helperMailer.setButtonCopyFromPlugin(),acym_helperMailer.setSynchroExistingUsers(),acym_helperSelectionPage.setSelectionElement(!0,!0,a),a(),acym_helperSelectionMultilingual.init("configuration"),e('[data-task="downloadExportChangesFile"]').on("click",function(){setTimeout(function(){e("#formSubmit")[0].disabled=!1,e('[name="task"]').val("")},5)}),function(){let i=e(".acym__allowed__hosts__select");i.select2({width:"100%",placeholder:i.attr("placeholder"),tags:!0,theme:"foundation",tokenSeparators:[" "],createTag:function(e){let i=jQuery.trim(e.term);return""===i?null:{id:i,text:i}}})}()});